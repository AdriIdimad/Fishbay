<!--
  Generated template for the DerPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
      <button ion-button [menuToggle]="menu1">
          <ion-icon name="menu"></ion-icon>
        </button>  
    <ion-title class="center">Perfil</ion-title>
    <ion-buttons right>
      <button ion-button icon-only color="royal" (click)="ajustes()">
        <ion-icon name="md-cog"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
 
</ion-header>
<ion-content padding>

  <div id="avatar" align="center" *ngIf="!facebook">   
        <img class="profile-image" src="{{(perfilData | async)?.imagen}}">
        <br>
        <button><a (click)="subirImagen(user)">Cambiar imagen de perfil</a></button>
  </div>
  <div align="center" *ngIf="facebook">   
    <img class="profile-image" src="{{picture}}">
    <br>
  </div>
<ion-list>
  <ion-item >
    <ion-label floating><ion-icon name="person"></ion-icon> Nombre</ion-label>
    <ion-input type="text" name="name" [(ngModel)]="user.nombre" value="{{(perfilData | async)?.nombre}}" required></ion-input>
    <ion-icon item-right name="md-create"></ion-icon>  
  </ion-item>
  <ion-item>
    <ion-label floating><ion-icon name="person"></ion-icon> nick</ion-label>
    <ion-input type="text" name="nick" [(ngModel)]="user.nick" value="{{(perfilData | async)?.nick}}" required></ion-input>
    <ion-icon item-right name="md-create"></ion-icon>
  </ion-item>
  <ion-item>
    <ion-label floating><ion-icon name="person"></ion-icon> Descripción corta</ion-label>
    <ion-input type="text" name="nick" [(ngModel)]="user.descripcion" value="{{(perfilData | async)?.descripcion}}" required></ion-input>
    <ion-icon item-right name="md-create"></ion-icon>
  </ion-item>
  <ion-item>
    <ion-label floating><ion-icon name="person"></ion-icon> Edad</ion-label>
    <ion-input type="text" name="nick" [(ngModel)]="user.edad" value="{{(perfilData | async)?.edad}}" required></ion-input>
    <ion-icon item-right name="md-create"></ion-icon>
  </ion-item>
  <ion-item>
    <ion-label floating><ion-icon name="person"></ion-icon> Ciudad</ion-label>
    <ion-input type="text" name="nick" [(ngModel)]="user.ciudad" value="{{(perfilData | async)?.ciudad}}" required></ion-input>
    <ion-icon item-right name="md-create"></ion-icon>
  </ion-item>
  <ion-item>
    <ion-label floating><ion-icon name="person"></ion-icon> Profesión</ion-label>
    <ion-input type="text" name="nick" [(ngModel)]="user.profesion" value="{{(perfilData | async)?.profesion}}" required></ion-input>
    <ion-icon item-right name="md-create"></ion-icon>
  </ion-item>  
  <ion-item>
    <ion-label stacked><ion-icon name="mail"></ion-icon> Email</ion-label>
    <ion-input type="email" [(ngModel)]="user.email" [disabled]=true value="{{(perfilData | async)?.email}}"></ion-input>
</ion-item>
<ion-item hidden="true">
  <ion-label floating><ion-icon name="lock"></ion-icon> Contraseña</ion-label>
  <ion-input type="password" [(ngModel)]="user.password" name="contraseña" value="{{(perfilData | async)?.password}}" required ></ion-input>
  <ion-icon item-right name="md-create"></ion-icon>
</ion-item>
<ion-item style="text-align:center;" *ngIf="!facebook">
  <button style="color: black !important;border-color: black !important" ion-button round outline center (click)="cambiarpassword(user.email,user.password)">Cambiar contraseña</button>
</ion-item>
<ion-item style="text-align:center;">
    <button style="color: blue !important;" ion-button round outline center (click)="listaBloqueados()">Usuarios bloqueados</button>
</ion-item>
<ion-item style="text-align:center;">
  <button style="color: red !important;border-color: red !important" ion-button round outline center (click)="cancelarCuenta(user.email,user.password)">Eliminar Cuenta</button>
</ion-item>
</ion-list>

<button icon-left ion-button class="eventos" color="primary" (click)="actualizar(user)"><ion-icon name="add-person"></ion-icon>Guardar cambios</button> 
 
</ion-content>

<!--
<<ion-content padding>
  <ion-list>
      <ion-item>
        <ion-avatar item-start *ngIf="!facebook" >
          <img  src="{{(perfilData | async)?.imagen}}">
        </ion-avatar>
        <ion-avatar item-start *ngIf="facebook">
          <img src="{{picture}}">
        </ion-avatar> 
        <h2 *ngIf="facebook">
            {{name}}
        </h2>
        <h2 *ngIf="!facebook">
        {{(perfilData | async)?.nombre}}
        </h2>
        <p *ngIf="!facebook">
          {{(perfilData | async)?.apellido}}
        </p>
        <p *ngIf="facebook">
          {{first_name}}
        </p>
      </ion-item>
      
       <ion-item>
        Edad
        <ion-note item-end *ngIf="!facebook">
          {{(perfilData | async)?.edad}}
        </ion-note>
        <ion-note item-end *ngIf="facebook">
          {{edad}}
        </ion-note>       
      </ion-item>

       <ion-item>
        Ciudad
        <ion-note item-end *ngIf="!facebook">
          {{(perfilData | async)?.ciudad}}
        </ion-note>

        <ion-note item-end *ngIf="facebook">
          {{ciudad}}
        </ion-note>
      </ion-item>

      <ion-item>
        Email
        <ion-note item-end *ngIf="!facebook">
          {{(perfilData | async)?.email}}
        </ion-note>
        <ion-note item-end *ngIf="facebook">
          {{email}}
        </ion-note>
      </ion-item>

      <ion-item>
        Contraseña
        <ion-note *ngIf="!facebook" item-end type="password" >
          {{(perfilData | async)?.password}}
        </ion-note>
        <ion-note *ngIf="facebook" item-end type="password" >
          
        </ion-note>
      </ion-item>
           
  </ion-list>
</ion-content>

-->