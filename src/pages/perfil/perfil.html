<!--
  Generated template for the DerPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <button ion-button [menuToggle]="menu1">
      <ion-icon name="menu"></ion-icon>
    </button>
    <!--<ion-title class="center">{{"PERFIL_TITULO" | translate }}</ion-title>-->
    <ion-buttons right>
      <button ion-button icon-only color="royal" (click)="ajustes()">
        <ion-icon name="settings"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>
<ion-content padding>
  <div *ngFor="let perfil of perfilData | async">
  <div id="avatar" align="center">
    <img class="profile-image" src="{{perfil.imagen}}" style="object-fit: cover;">
    <ion-fab style="margin-top: 150px;margin-left: -70px;">
      <button ion-fab clear icon-center style="background-color: white !important;color: #9c9c9c !important;border: 3px solid #9c9c9c;" (click)="subirImagen(user)"><ion-icon name="fishbay-camara" large></ion-icon></button>
    </ion-fab>
  </div>
  <rating syle="text-align:center;" [(ngModel)]="perfil.puntuacion" readOnly="true" max="5" emptyStarIconName="fishbay-estrella"
  halfStarIconName="fishbay-estrella2" starIconName="fishbay-estrella2" nullable="false" (ngModelChange)="onModelChange($event)">
  </rating>
  <ion-list>
    <ion-item> 
      <ion-label floating>
        <ion-icon name="fishbay-nombre"></ion-icon> {{"PERFIL_NOMBRE" | translate}}
      </ion-label>
      <ion-input type="text" name="fishbay-nombre" [(ngModel)]="user.nombre" value="{{perfil.nombre}}" required></ion-input>
    </ion-item>
    <ion-item>
      <ion-label floating>
        <ion-icon name="fishbay-nick"></ion-icon> {{"PERFIL_NICK" | translate}}
      </ion-label>
      <ion-input type="text" name="fishbay-nick" [(ngModel)]="user.nick" value="{{perfil.nick}}" required></ion-input>    
    </ion-item>
    
    <ion-item>
      <ion-label stacked>
        <ion-icon name="fishbay-emailPerfil"></ion-icon> {{"PERFIL_EMAIL" | translate}}
      </ion-label>
      <ion-input type="email" [(ngModel)]="user.email" [disabled]=true value="{{perfil.email}}"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label floating>
        <ion-icon name="fishbay-descripcionPerfil"></ion-icon> {{"PERFIL_DESCRIPCIONCORTA" | translate}}
      </ion-label>
      <ion-input type="text" name="fishbay-descripcionPerfil" [(ngModel)]="user.descripcion" value="{{perfil.descripcion}}"
        required></ion-input>
      
    </ion-item>
    <ion-item>
      <ion-label floating>
        <ion-icon name="fishbay-ciudadPerfil"></ion-icon> {{"PERFIL_CIUDAD" | translate}}
      </ion-label>
      <ion-input type="text" name="fishbay-ciudadPerfil" [(ngModel)]="user.ciudad" value="{{perfil.ciudad}}" required></ion-input>
      
    </ion-item>
    <ion-item>
      <ion-label floating>
        <ion-icon name="fishbay-edadPerfil"></ion-icon> {{"PERFIL_EDAD" | translate}}
      </ion-label>
      <ion-input type="text" name="fishbay-edadPerfil" [(ngModel)]="user.edad" value="{{perfil.edad}}" required></ion-input>
      
    </ion-item>

    <ion-item>
      <ion-label floating>
        <ion-icon name="fishbay-profesionPerfil"></ion-icon> {{ "PERFIL_PROFESION" | translate}}
      </ion-label>
      <ion-input type="text" name="fishbay-profesionPerfil" [(ngModel)]="user.profesion" value="{{perfil.profesion}}"
        required></ion-input>
      
    </ion-item>

    <ion-item hidden="true">
      <ion-label floating>
        <ion-icon name="fishbay-cambiarContraseña"></ion-icon> {{"PERFIL_PASSWORD" | translate}}
      </ion-label>
      <ion-input type="password" [(ngModel)]="user.password" name="contraseña" value="{{perfil.password}}"
        required></ion-input>      
    </ion-item>
    <ion-item id="noBorde2">
    <button icon-left ion-button full class="eventos" color="primary" (click)="actualizar(user)">
      {{"PERFIL_BOTON_GUARDARCAMBIOS" | translate}}
    </button>
  </ion-item> 

    <ion-item id="noBorde" *ngIf="!facebook">
      <button  icon-left ion-button (click)="cambiarpassword(user.email,user.password)" full clear><ion-icon style="margin-right: 10px;" name="fishbay-cambiarContraseña" ></ion-icon> {{"PERFIL_BOTON_CAMBIARPASSWORD" |
        translate}}</button>
    </ion-item>
    <ion-item >
      <button icon-left ion-button (click)="listaBloqueados()" full clear><ion-icon style="margin-right: 10px;" name="fishbay-usuariosBloqueados"></ion-icon> {{"PERFIL_BOTON_USUARIOSBLOQUEADOS"
        | translate}}</button>
    </ion-item>
    <ion-item id="noBorde" style="text-align:left;">
      <button icon-left ion-button (click)="cancelarCuenta(user.email,user.password)" full clear><ion-icon style="margin-right: 10px;" name="fishbay-eliminarPerfil"></ion-icon> {{"PERFIL_BOTON_ELIMINARCUENTA" | translate}}</button>
    </ion-item>
  </ion-list>
</div>
</ion-content>
